<script lang="ts">
	let { input, nrSegments }: { input: number | undefined; nrSegments: number } = $props();
	const masks: { [key: number]: { [key: number]: number } } = {
		7: {
			0: 0b1111110,
			1: 0b0110000,
			2: 0b1101101,
			3: 0b1111001,
			4: 0b0110011,
			5: 0b1011011,
			6: 0b1011111,
			7: 0b1110000,
			8: 0b1111111,
			9: 0b1111011
		}
	};

	const state: (i: number) => 'on' | 'off' = (i) => {
		if (input == undefined) {
			return 'off';
		}
		return ((1 << (6 - i)) & masks[nrSegments][input]) != 0 ? 'on' : 'off';
	};
</script>

{#if nrSegments === 14}
	<svg viewBox="0 0 143 202.25" class="svg-background">
		<g transform="translate(279.53125,-639.1875)" stroke-linecap="square">
			<path
				class="stroke-current stroke-2 {state(0)}"
				d="m -258.34868,640.28548 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(1)}"
				d="m -158.53902,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(2)}"
				d="m -158.53902,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(3)}"
				d="m -258.34868,820.2596 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(4)}"
				d="m -278.53901,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(5)}"
				d="m -278.53901,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(6)}"
				d="m -258.34868,730.60039 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z"
			/>
			<!--
			<path d="m -278.53901,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m -278.53901,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m -158.53902,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m -158.53902,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m -258.34868,820.2596 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z" />
			<path d="m 94.297079,660.19268 30,50 0,20 -10,0 -30,-50 0,-20 10,0 z" />
			<path d="m 174.29708,660.19268 -30,50 0,20 10,0 30,-50 0,-20 -10,0 z" />
			<path d="m 124.29713,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 124.29713,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 174.29708,820.1927 -30,-50 0,-20 10,0 30,50 0,20 -10,0 z" />
			<path d="m 94.297079,820.1927 30,-50 0,-20 -10,0 -30,50 0,20 10,0 z" />
			<path d="m 124.29713,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 64.297129,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 64.297129,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 184.29713,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 184.29713,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 84.297129,730.19264 40,0 10,10 -10,10 -40,0 -10,-10 10,-10 z" />
			<path d="m 144.29713,730.19264 40,0 10,10 -10,10 -40,0 -10,-10 10,-10 z" />
			<path d="m 268.50077,660.19268 30,50 0,20 -10,0 -30,-50 0,-20 10,0 z" />
			<path d="m 348.50077,660.19268 -30,50 0,20 10,0 30,-50 0,-20 -10,0 z" />
			<path d="m 298.50082,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 298.50082,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 348.50077,820.1927 -30,-50 0,-20 10,0 30,50 0,20 -10,0 z" />
			<path d="m 268.50077,820.1927 30,-50 0,-20 -10,0 -30,50 0,20 10,0 z" />
			<path d="m 298.50082,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 258.50082,640.19264 40,0 10,10 -10,10 -40,0 -10,-10 10,-10 z" />
			<path d="m 318.50082,640.19264 40,0 10,10 -10,10 -40,0 -10,-10 10,-10 z" />
			<path d="m 238.50082,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 238.50082,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 358.50082,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 358.50082,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 258.50082,820.1926 40,0 10,10 -10,10 -40,0 -10,-10 10,-10 z" />
			<path d="m 318.50082,820.1926 40,0 10,10 -10,10 -40,0 -10,-10 10,-10 z" />
			<path d="m 258.50082,730.19264 40,0 10,10 -10,10 -40,0 -10,-10 10,-10 z" />
			<path d="m 318.50082,730.19264 40,0 10,10 -10,10 -40,0 -10,-10 10,-10 z" />
			<path d="m -258.34868,730.60039 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z" />
			<path d="m -258.34868,640.28548 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z" />
			<path d="m -106.53016,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m -106.53016,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 13.469829,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m 13.469829,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z" />
			<path d="m -86.339831,820.2596 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z" />
			<path d="m -86.339831,730.60039 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z" />
			<path d="m -86.339831,640.28548 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z" />
			<path d="m 3.396847,660.19268 -42.122677,70.15983 12.122677,-0.15981 10,0 30,-50 0,-20 z" />
			<path
				d="m -76.603153,820.1927 41.934535,-69.64595 -11.934535,0.12147 -10,0 -30,49.66038 0,19.8641 z"
			/>
			<path d="m 84.047405,640.28548 99.809675,-0.067 10,10 -10,10 -99.809675,0.067 -10,-10 z" />
			<path d="m 84.047405,820.4512 99.809675,-0.067 10,10 -10,10 -99.809675,0.067 -10,-10 z" />
		-->
		</g>
	</svg>
{:else}
	<svg viewBox="0 0 143 202.25" class="svg-background">
		<g transform="translate(279.53125,-639.1875)" stroke-linecap="square">
			<path
				class="stroke-current stroke-2 {state(0)}"
				d="m -258.34868,640.28548 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(1)}"
				d="m -158.53902,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(2)}"
				d="m -158.53902,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(3)}"
				d="m -258.34868,820.2596 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(4)}"
				d="m -278.53901,820.1926 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(5)}"
				d="m -278.53901,730.19264 0,-70 10,-10 10,10 0,70 -10,10 -10,-10 z"
			/>
			<path
				class="stroke-current stroke-2 {state(6)}"
				d="m -258.34868,730.60039 99.80967,-0.067 10,10 -10,10 -99.80967,0.067 -10,-10 z"
			/>
		</g>
	</svg>
{/if}

<style lang="scss">
	.svg-background {
		color: var(--color-white);

		@media (prefers-color-scheme: dark) {
			color: var(--color-neutral-900);
		}
	}

	.off {
		fill: var(--color-neutral-400);

		@media (prefers-color-scheme: dark) {
			fill: var(--color-neutral-100);
		}
	}

	.on {
		fill: var(--color-red-600);

		@media (prefers-color-scheme: dark) {
			fill: var(--color-red-400);
		}
	}
</style>
